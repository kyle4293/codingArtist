<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodingArtist</title>

    <link rel="stylesheet" href="css/styles.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <style>
        .table-responsive {
            margin: 50px 150px 30px 150px;
        }

        textarea {
            height: 300px;

        }

        .pb-2 {
            font-size: 50px;
        }

        .img-thumbnail_1 {
            width: 180px;
            height: 300px;
        }

        .img-thumbnail {
            width: 376px;
            height: 376px;
        }

        .mypostingbox {

            width: 600px;
            margin: 30px auto 30px auto;
            padding: 20px;
            box-shadow: 0px 0px 3px 0px blue;
            border-radius: 5px;
        }

        .title {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
        }
    </style>

    <script type="module">
        // Firebase SDK 라이브러리 가져오기
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";


        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyAvFpgx2vL0ivDQvrPrGwysXB4aWTXaPL0",
            authDomain: "sparta-1730c.firebaseapp.com",
            projectId: "sparta-1730c",
            storageBucket: "sparta-1730c.appspot.com",
            messagingSenderId: "347762079276",
            appId: "1:347762079276:web:f810e63af91fcaaa23c389",
            measurementId: "G-SJ8YR6BE0H"
        };


        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);


        $("#submit").click(async function () {
            let content = $('#content').val();
            let pwd = $('#pwd').val();
            let date = new Date();
            let name = $('#name').val();

            let doc = {
                'content': content,
                'pwd': pwd,
                'date': date.toLocaleString(),
                'name': name

            };
            await addDoc(collection(db, "guestbook"), doc);
            alert('저장 완료!');
            window.location.reload();


            // console.log(doc['content']);
            // console.log(doc['pwd']);
            // console.log(doc['date']);
            // console.log(doc['name']);

            //수정,삭제,작성자 기능구현하는법 알아오기
        })
            let cnt =0;
        let docs = await getDocs(collection(db, "guestbook"));
        docs.forEach((doc) => {
            let row = doc.data();
            cnt++;
            let pwd = row['pwd'];
            let content = row['content'];
            let date = row['date'];
            let name = row['name'];

            let temp_html = `
            <div class="card my-4">
            <div class="card-body">
                <div class="card-text">${content}</div>
                <div class="d-flex justify-content-end">
                    <div class="badge bg-light text-dark p-2 text-start">
                        <div class="mb-2">${name}</div>
                        <div>${date}</div>
                        <div class="my-3">
                                <button id="update" type="button" class="btn btn-outline-secondary">수정</button>
                                <button id="delete" type="button" class="btn btn-outline-secondary">삭제</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>`;
            $('#mycomment').append(temp_html);
        });
            $('#cnt').append(`<h6 class="border-bottom my-3 py-2">${ cnt }개의 글이 있습니다.</h5>`);

    </script>
</head>

<body>
    <!-- 헤더 -->
    <header class="p-3 border-bottom">
        <div id="header" class="container">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                <a href="index.html" class="d-flex align-items-center text-dark text-decoration-none">
                    <img src="img/codingArtistLogo.png" width="150px">
                </a>

                <ul class="nav col-12 col-lg-auto ms-lg-auto justify-content-center mb-md-0">
                    <li><a href="about.html" class="nav-link px-2 link-dark">About</a></li>
                    <li><a href="inside.html" class="nav-link px-2 link-dark">Inside</a></li>
                    <li><a href="contact.html" class="nav-link px-2 link-dark">Contact</a></li>
                </ul>
            </div>
    </header>

    <!-- 메인 소개란 -->
    <div class="container px-4 py-5">
        <h2 class="pb-2 border-bottom">아티스트 자세히 알아보기</h2>

        <div class="row row-cols-1 row-cols-md-2 align-items-md-center g-5 py-5">
            <div class="col d-flex flex-column align-items-start gap-2">
                <h2 class="fw-bold text-body-emphasis">아티스트 : 이현구</h2>
                <p class="text-body-secondary">안녕하세요 아티스트 이현구 라고 합니다. 제 TMI를 알려드릴게요!</p>

                <img src="img/이현구.jpg" class="img-thumbnail_1" alt="...">

                <!-- <a href="#" class="btn btn-primary btn-lg">Primary button</a> -->
            </div>

            <div class="col">
                <div class="row row-cols-1 row-row-sm-2 g-3">
                    <div class="col d-flex flex-column gap-2">
                        <div
                            class="feature-icon-small d-inline-flex align-items-center justify-content-center text-bg-primary bg-gradient fs-4 rounded-3">
                            <svg class="bi" width="1em" height="1em">
                                <use xlink:href="#collection"></use>
                            </svg>
                        </div>
                        <h4 class="fw-semibold mb-0 text-body-emphasis">나의 최애곡</h4>
                        <p class="text-body-secondary"></p>
                    </div>

                    <div class="col d-flex flex-column gap-2">
                        <div
                            class="feature-icon-small d-inline-flex align-items-center justify-content-center text-bg-primary bg-gradient fs-4 rounded-3">
                            <svg class="bi" width="1em" height="1em">
                                <use xlink:href="#gear-fill"></use>
                            </svg>
                        </div>
                        <h4 class="fw-semibold mb-0 text-body-emphasis">나의 인생영화</h4>
                        <p class="text-body-secondary"></p>
                    </div>

                    <div class="col d-flex flex-column gap-2">
                        <div
                            class="feature-icon-small d-inline-flex align-items-center justify-content-center text-bg-primary bg-gradient fs-4 rounded-3">
                            <svg class="bi" width="1em" height="1em">
                                <use xlink:href="#speedometer"></use>
                            </svg>
                        </div>
                        <h4 class="fw-semibold mb-0 text-body-emphasis">나의 버킷리스트</h4>
                        <p class="text-body-secondary"></p>
                    </div>

                    <div class="col d-flex flex-column gap-2">
                        <div
                            class="feature-icon-small d-inline-flex align-items-center justify-content-center text-bg-primary bg-gradient fs-4 rounded-3">
                            <svg class="bi" width="1em" height="1em">
                                <use xlink:href="#table"></use>
                            </svg>
                        </div>
                        <!-- <h4 class="fw-semibold mb-0 text-body-emphasis">Featured title</h4>
                        <p class="text-body-secondary">Paragraph of text beneath the heading to explain the heading.</p> -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 주제 1,2,3 -->
    <main>
        <div class="container marketing">
            <hr class="featurette-divider">

            <div class="row featurette">
                <div class="col-md-7">
                    <h2 class="featurette-heading fw-normal lh-1">Lenka - skipalong <span
                            class="text-body-secondary"></span></h2>
                    <p class="lead">저의 최애곡은 Lenka의 skipalong 이라는 노래입니다. ...</p>
                </div>
                <div class="col-md-5">
                    <img src="img/Lenka.jpeg" class="img-thumbnail" alt="...">
                </div>
            </div>

            <hr class="featurette-divider">
            <div class="row featurette">
                <div class="col-md-7 order-md-2">
                    <h2 class="featurette-heading fw-normal lh-1">HarryPotter Series <span
                            class="text-body-secondary"></span></h2>
                    <p class="lead">저의 인생영화는 해리포터시리즈 입니다. ...</p>
                </div>
                <div class="col-md-5 order-md-1">
                    <img src="img/HarryPotter.jpeg" class="img-thumbnail" alt="...">
                </div>
            </div>

            <hr class="featurette-divider">

            <div class="row featurette">
                <div class="col-md-7">
                    <h2 class="featurette-heading fw-normal lh-1">Aurora <span class="text-body-secondary"></span></h2>
                    <p class="lead">저의 버킷리스트는 오로라 직접 보기 입니다. ...</p>
                </div>
                <div class="col-md-5">
                    <img src="img/Aurora.jpeg" class="img-thumbnail" alt="...">
                </div>
            </div>
        </div>

    </main>

    <!-- Contact -->
    <section class="page-section bg-light" id="team">
        <div class="container">
            <div class="text-center">
                <h2 class="section-heading text-uppercase">Contact</h2>
            </div>
            <hr>
            <div class="row">
                <div class="my-5 col-lg-4">
                    <div class="team-member">
                        <div class="mx-auto">
                            <img class="mx-auto" src="img/email.png" alt="..." width="50px;">
                            <h4>Email</h4>
                            <a class="text-muted pt-3">cchs33@gmail.com</a>
                        </div>
                    </div>
                </div>
                <div class="my-5 col-lg-4">
                    <div class="team-member">
                        <a href="https://www.instagram.com/cchs33/"><img class="mx-auto" src="img/instagram.png"
                                alt="..." width="50px;"></a>
                        <h4>Instagram</h4>
                        <a class="text-muted pt-3" href="https://www.instagram.com/cchs33/"><i>
                                @cchs33</i></a>
                    </div>
                </div>
                <div class="my-5 col-lg-4">
                    <div class="team-member">
                        <a href="https://github.com/kyle4293"><img class="mx-auto" src="img/github.png" alt="..."
                                width="50px;"></a>
                        <h4>GitHub</h4>
                        <a class="text-muted pt-3" href="https://github.com/Sk1palong"><i>Sk1palong</i></a>
                    </div>
                </div>

            </div>
            <div class="my-5 row">
                <div class="col-lg-8 mx-auto text-center">
                    <p class="large text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aut eaque,
                        laboriosam veritatis, quos non quis ad perspiciatis, totam corporis ea, alias ut unde.</p>
                </div>
            </div>
        </div>
    </section>




    <!-- Comments-->
    <!-- 댓글 -->
    <div class="comments m-4 p-4">
        <h4 id ="cnt">방명록</h4>
            <form class="my-4">
                <textarea id="content" class="form-control" rows="4" placeholder="방명록을 작성하세요."></textarea>
                <input id="submit" type="button" value="방명록 작성" class="btn btn-primary">
                <input id="pwd" type="text" class="form-control" placeholder="password" aria-label="Server">
                <input id="name" type="text" class="form-control" placeholder="Username" aria-label="Username">
            </form>
            <hr>
            <div id="mycomment">
                

            </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>


    <!-- Footer-->
    <footer class="footer py-4">
        <div id="footer" class="container">
            <div class="row align-items-center">
                <div class="col-lg-4 text-lg-start">Copyright &copy; CodingArtist 2023</div>
                <div class="col-lg-4 my-3 my-lg-0">
                    <a class="btn" href="https://github.com/kyle4293/codingArtist">
                        <img src="img/github.png" width="30px">
                        <i>github</i></a>
                </div>
                <div class="col-lg-4 text-lg-end">
                    <a class="link-dark text-decoration-none me-3" href="http://www.spartacodingclub.kr/"><i>Sparta
                            Coding Club</i></a>
                </div>
            </div>
        </div>
    </footer>

</body>

</html>